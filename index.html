<!DOCTYPE html>
<html lang="sw" data-ng-app="app">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Eco Ops App</title>

  <!-- Eco Ops App  operates with local storage, using the browser as a key value- store -->
  <!-- data is stored in json data strings in the localstorage, and exchanged with other users --> 
  <!-- supabase.io free level service is used as the cloud data storage system -->
  <!-- data export is geojson format -->
	
  <!-- Designed for economic community development through cooperation and representation, education, -->
  <!--  and representation for the pooest sector -->

  <!--  Sustainable Community Development Hub -->
  <!--  P.O. Box 911 Nederland, CO 80466 -->
	
  <link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
  crossorigin="anonymous"
  />

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script>
  <!--          <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@0.4.1/dist/leaflet.draw.css" /> -->		
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
  <!--          <script src="/leaflet.draw.0.4.0.js"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js" integrity="sha512-ozq8xQKq6urvuU6jNgkfqAmT7jKN2XumbrX1JiB3TnF7tI48DPI4Gy1GXKD/V3EExgAs1V+pRO7vwtS1LHg0Gw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <!--		<script src="https://cdnjs.cloudflare.com/ajax/libs/Turf.js/0.0.124/turf.js"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Turf.js/5.1.5/turf.js"></script>
  <!--  https://cdnjs.cloudflare.com/ajax/libs/Turf.js/0.0.124/turf.min.js   -->
  <!---	<script src="src/components/MapPolylineIntersections.js"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.76.0/src/L.Control.Locate.js"></script>
  <style> .leaflet-control-locate a{cursor:pointer}.leaflet-control-locate a .leaflet-control-locate-location-arrow{display:inline-block;width:16px;height:16px;margin:7px;background-color:#000;-webkit-mask-image:url("/src/icons/location-arrow-solid.svg");mask-image:url("../icons/location-arrow-solid.svg");-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-position:center;mask-position:center}.leaflet-control-locate a .leaflet-control-locate-spinner{display:inline-block;width:16px;height:16px;margin:7px;background-color:#000;-webkit-mask-image:url("../icons/spinner-solid.svg");mask-image:url("../icons/spinner-solid.svg");-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-position:center;mask-position:center;animation:leaflet-control-locate-spin 2s linear infinite}.leaflet-control-locate.active a .leaflet-control-locate-location-arrow{background-color:#2074b6}.leaflet-control-locate.following a .leaflet-control-locate-location-arrow{background-color:#fc8428}.leaflet-touch .leaflet-bar .leaflet-locate-text-active{width:100%;max-width:200px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;padding:0 10px}.leaflet-touch .leaflet-bar .leaflet-locate-text-active .leaflet-locate-icon{padding:0 5px 0 0}.leaflet-control-locate-location circle{animation:leaflet-control-locate-throb 4s ease infinite}@keyframes leaflet-control-locate-throb{0%{stroke-width:1}50%{stroke-width:3;transform:scale(0.8, 0.8)}100%{stroke-width:1}}@keyframes leaflet-control-locate-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}/*# sourceMappingURL=L.Control.Locate.min.css.map */

		#activity {
			display: table-cell;
			text-align: center;
			vertical-align: middle;
		}

		#activity:before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			width: 100vw;
			height: 20vh;
			background: rgba(0,173,239,0.5);
		}
		#activity:after {
			content: '';
			position: absolute;
			bottom: 0;
			left: 0;
			width: 100vw;
			height: 20vh;
			background: rgba(235,0,138, 0.5);
		}

		#result {
			text-transform: uppercase;
		}

		.tryagain {
		background-attachment: scroll;
		background-clip: border-box;
		background-color: rgb(127, 206, 119);
		background-image: none;
		background-origin: padding-box;
		background-size: auto;
		border-bottom-left-radius: 16px;
		border-bottom-right-radius: 16px;
		border-top-right-radius: 16px;
		box-sizing: border-box;
		color: rgb(255, 255, 255);
		cursor: pointer;
		display: inline-block;
		font-family: 'Open Sans', sans-serif;
		font-size: 32px;
		font-stretch: normal;
		font-style: normal;
		font-variant: normal;
		font-weight: normal;
		height: 93px;
		line-height: normal;
		margin-bottom: 8px;
		margin-left: 9.28px;
		margin-right: 9.28px;
		margin-top: 8px;
		min-height: 0px;
		min-width: 208px;
		outline-width: 0px;
		padding-bottom: 24px;
		padding-left: 24px;
		padding-right: 24px;
		padding-top: 24px;
		position: relative;
		text-align: center;
		text-transform: none;
		transition-delay: 0s;
		transition-duration: 0.28s;
		transition-property: box-shadow;
		transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
		width: 351.594px;
		z-index: 0;
		-webkit-user-select: none;
		}

		a:link, a:hover, a:visited, a:active {
			text-decoration: none;
		}
		.hits {
 		 font-size: 2em;
 		 font-weight: bolder;
		}
	        #switch_to_map, #switch_to_orod {
		  -webkit-transform: scaleX(-1);
                  transform: scaleX(-1);	  
	        }
	</style>
  <script src="https://unpkg.com/@supabase/supabase-js"></script>	
  <script src="/convexhull.js"></script>
   

</head>
<body>
  <ion-app>
    <ion-menu content-id="main-content">
      <ion-header>
        <ion-toolbar color="success">
          <ion-title>Eco Ops App</ion-title>
        </ion-toolbar>
      </ion-header>

      <ion-content>
        <ion-list>
         <ion-list-header id="menu_header" style="background:url(/icons/header.png);"> </ion-list-header>
		    		
		<button onclick="amharic()">ምናሌ</button>
		<button onclick="arabic()">عربي</button>
		<button onclick="chinese()">中文</button>
		<button onclick="eng()">E</button>
		<button onclick="french()">F</button>
		<button onclick="russian()">R</button>
		<button onclick="spanish()">S</button>
		<button onclick="sheng()">Sw</button>

          <ion-menu-toggle auto-hide="false"> 	  
            <ion-item button>
              <ion-icon slot="1" data-src="Orodha ya ma orodha"></ion-icon>
              <ion-label id="0maleaf"> Ma leaf </ion-label>
            </ion-item>	
	    <ion-item button>
              <ion-icon slot="1" data-src="Download your data"></ion-icon>
              <ion-label id="0checkin"> Pakua data yako </ion-label>
            </ion-item>
            <ion-item button>
              <ion-icon slot="1" data-src="Orodha ya ma orodha"></ion-icon>
              <ion-label id="0orodha"> Orodha ya ma orodha </ion-label>
            </ion-item>
	    <ion-item button>
              <ion-icon slot="1" data-src="Selecta"></ion-icon>
              <ion-label id="0selecta"> Selecta </ion-label>
            </ion-item>
            <ion-item button>
              <ion-icon slot="1" data-src="Kusafisha"></ion-icon>
              <ion-label id="0kusafisha"> Kusafisha </ion-label>
            </ion-item>
            <ion-item button>
              <ion-icon slot="2" data-src="Kwachk"></ion-icon>
              <ion-label id="0kwachk"> Kwachk </ion-label>
            </ion-item>
            <ion-item button>
              <ion-icon slot="3" data-src="Arega / Kusaga"></ion-icon>
              <ion-label id="0arega"> Arega / Kusaga </ion-label>
            </ion-item>
            <ion-item button>
              <ion-icon slot="4" data-src="Ma Broke"></ion-icon>
              <ion-label id="0mabroker"> Ma Broker </ion-label>
            </ion-item>
            <ion-item button>
              <ion-icon slot="4" data-src="Ma Broke"></ion-icon>
              <ion-label id="0footsoldiers"> Ma Foot Soldiers </ion-label>
            </ion-item>		  
            <ion-item button>
              <ion-icon slot="4" data-src="Boiler Pusha"></ion-icon>
              <ion-label id="0boiler"> Boiler Pusha </ion-label>
            </ion-item>
	    <ion-item button>
              <ion-icon slot="4" data-src="Mould Ya Presha"></ion-icon>
              <ion-label id="0presha"> Mold Ya Presha </ion-label>
            </ion-item>
            <ion-item button>
              <ion-icon slot="4" data-src="Gas Ngata / Dizo"></ion-icon>
              <ion-label id="0dizo"> Gas Ngata / Dizo </ion-label>
            </ion-item>
            <ion-item button>
              <ion-icon slot="4" data-src="Gas Cooker"></ion-icon>
              <ion-label id="0gascooker"> Gas Cooker </ion-label>
            </ion-item>
            <ion-item button>
              <ion-icon slot="4" data-src="Gas Cooker / Gas Tangi"></ion-icon>
              <ion-label id="0gastangi"> Gas Tangi </ion-label>
            </ion-item>		  
            <ion-item button>
              <ion-icon slot="4" data-src="Kumaintain / kukacheza"></ion-icon>
              <ion-label id="0kumaintain"> -- Kumaintain / kukacheza </ion-label>
            </ion-item>
            <ion-item button>
              <ion-icon slot="4" data-src="Stingo za ndifu"></ion-icon>
              <ion-label id="0stingozandifu"> -- Stingo za ndifu </ion-label>
            </ion-item>
            <ion-item button>
              <ion-icon slot="4" data-src="ma Xchange"></ion-icon>
              <ion-label id="0maxchange"> -- ma Xchange </ion-label>
            </ion-item>
          </ion-menu-toggle>
	  <ion-item>For peace, a just justice system, reproductive rights, human rights, ecosystem rights, and the power of free software.</ion-item>
        </ion-list>	      	      	   	      
      </ion-content>
    </ion-menu>

    <ion-page class="ion-page" id="main-content">
      <ion-header>
        <ion-toolbar>
          <ion-buttons slot="start">
            <ion-menu-toggle>
              <ion-button>
                <ion-icon slot="icon-only" data-src="menu.svg"></ion-icon>
              </ion-button>
            </ion-menu-toggle>
          </ion-buttons>
          <ion-icon slot="end" data-src="/African-Mask-Chokwe-Angola-Zaire.svg"></ion-icon>
          <ion-title id="page_title_header" slot="start">Usawa Mazingira</ion-title>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
	      
	      <!-- pages  -->
      
	      <div id=greeting><h1 id="greeting_content">Ngive ya Gabo -  Usawa Mazingwasa</h1>
	
	      
	      
	      </div>
	      <div id=orodha style="display:none;"><img src="/theme/mupy1/plastics_weigh_station_witness_and_scale_operator800.JPG" width="200" height="200" align="right"><h1><img src="/theme/mupy1/pleasepointing.svg" width=60 height=60 id="switch_to_map"> <span id="orod_title">Orodoha Ya Ma Orodoha</span> <img src="/theme/mupy1/pleasepointing.svg" width=60 height=60 id="switch_to_selecta"></h1>		      
		      		      

		      
		      
		      <div id="orod_cont" style="display:flex;">
			      
			   <ion-grid style="margin:10px;">
				  <ion-row>
       					
					<span id="plastic_checkins"></span>	
				  </ion-row>
			   </ion-grid>
			      
			      

			      
			      
			      
		      <form id="plastics_checkin" onsubmit="checkin0()">

			  <b>Plastic type:</b>
  			  <br>
			      <select id="ldplastictype">
				  <option value=PET>PETE</option>
				  <option value=HDPE>HDPE</option>
				  <option value=PVC>PVC</option>
				  <option value=LDPE>LDPE</option>
				  <option value=PP>PP</option>
				  <option value=PS>PS</option>
				  <option value=mixed_plastics>Mixed</option>
				  <option value=compostable>Compostable</option>
				  <option value=compost_product>Compost Product</option>
				  <option value=compost_hoofhorn>Compost amendment</option>
				  <option value=compost_greens>Compost Product</option>
				  <option value=compost_browns>Compost Product</option>
				  <option value=compost_mycelia>Mycelia</option>
				  <option value=worm_castings>Worm castings</option>
			      </select>
			      
  			  <br>
			  <b>Weight:</b>
			      <br>
				      	<input type=text name="ld-weight" id="ldweightkg" size="5"> kg
  			      <br>
			      
			  <b>Provider:</b>
			      <br>
				      	<input type=text name="ld-provider" id="ldprovider">
  			      <br>
				      
			  <b>Witness:</b>
			      <br>
				      	<input type=text name="ld-witness" id="ldwitness">
			      <br>	      
			      
  			  <b>Description:</b>
  			  <br>
			      
  			  <textarea id="lddescription" rows="4" cols="30"></textarea>
  			  <br><br>
			      
  			  <input type="submit" name="submit" value="Record Checkin" onsubmit="checkin0()">
			</form>		        	      

			      
		        <script>
			function checkin0(){	  
				event.preventDefault();				
				var item = document.querySelector('#ldplastictype').value;
				document.querySelector('#ldplastictype').value = "";
				var name = document.querySelector('#ldprovider').value;
				document.querySelector('#ldprovider').value = "";
				var weightkg = document.querySelector('#ldweightkg').value;
				document.querySelector('#ldweightkg').value = "";
				var witness = document.querySelector('#ldwitness').value;
				document.querySelector('#ldwitness').value = "";
				var description = document.querySelector('#lddescription').value;
				document.querySelector('#lddescription').value = "";
				//privacy.resistFingerprinting.reduceTimerPrecision.microseconds =111;
				const currentTimeInSeconds=Math.floor(Date.now()/1000);
				
				
				localStorage.setItem("plastics_checkin"+currentTimeInSeconds, "{item: "+item+",weight: "+weightkg+",name: "+name+",witness: "+witness+",description: "+description+"}" );									
				var idx = localStorage.getItem("plasticsCheckinIndex");									
	
					if (typeof idx === 'undefined' || idx === null) {
						localStorage.setItem("plasticsCheckinIndex", "plastics_checkin"+currentTimeInSeconds);									
					} else {
						idx = idx+",";
						localStorage.setItem("plasticsCheckinIndex", idx+ "plastics_checkin"+currentTimeInSeconds);									
					}	
				};
				
			var checkinlist = document.querySelector('#plastic_checkins').value;								
			
 				
			var checkinIndex = localStorage.getItem("plasticsCheckinIndex");
			const checkinArr = checkinIndex.split(',');
				checkinArr.forEach(element => {
					checkinList = element+"<BR><div style=\"background:#efefef\">"+
						localStorage.getItem(element)+"</div>"+checkinList;
				});	      	  
			     
			var checkinList = "<b>Current checkins:</b><BR>"+checkinList;

			document.getElementById("plastic_checkins").innerHTML=checkinList;	
		        </script>			      			      			      			      			      			      			      
		      </div>			      			    
		      
		      
		      		      <table class="table table-sm table-striped table-sortable" style="table-layout: fixed;">
		<thead>
			<tr>
				<th data-sort="string">String</th>
				<th data-sort="string">String (UA)</th>
				<th data-sort="int">Int</th>
				<th data-sort="float">Float</th>
				<th data-sort="date">Date</th>
			</tr>
		</thead>
		<tbody>
			<script>
				
			checkinArr.forEach(element => {
				console.log(element);
				localStorage.getItem(element)+"</div>"+checkinList;
			}		
				
			</script>
			
			
			<tr>
				<td>Corn</td>
				<td>Potato</td>
				<td>5</td>
				<td>2.3</td>
				<td>2021-06-22</td>
			</tr>
			<tr>
				<td>B</td>
				<td>крок</td>
				<td>3</td>
				<td>3.2</td>
				<td>2021-06-21</td>
			</tr>
			<tr>
				<td>E</td>
				<td>Європа</td>
				<td>4</td>
				<td>6.4</td>
				<td>2021-06-23</td>
			</tr>
			<tr>
				<td>d</td>
				<td>Індія</td>
				<td>1</td>
				<td>7.5</td>
				<td>2021-06-20</td>
			</tr>
			<tr>
				<td>C</td>
				<td>Шепіт</td>
				<td>2</td>
				<td>2.411</td>
				<td>2021-06-24</td>
			</tr>
		</tbody>
	</table>
		 
<script src="/tablesort.min.js"></script>
<script>document.querySelector('.table-sortable').tsortable()</script> 
		      
		      
		      
	      <br>		      
	      </div>
	      <div id=selecta style="display:none;"><h1 id="sele_title"><img src="/theme/mupy1/pleasepointing.svg" width=60 height=60 id="switch_to_orod"> <span id="sele_title">Selecta</span> <img src="/theme/mupy1/pleasepointing.svg" width=60 height=60 id="switch_to_kusafisha"></h1>
		      
		      
		      
		      
		      
	       </div>
	      <div id=kusafisha style="display:none;"><h1 id="kusa_title">Kusafisha</h1>
		      

		      
	      <div id="kusa_cont" style="display:flex;">
		      
	      <ion-grid> 
   		     	<ion-row>
                		<img src="/theme/mupy1/kusafisha.gif" width="200" height="200" align="right">
					
				<span id="plastic_washed"></span>	
			</ion-row>
	      </ion-grid> 
		      
		      
		   

		       <form action=# id="checkin">

			<div>
			Washed Weight:
				<input type=text name=checkinwt id=checkinwt>	   
				</div>
			<div>	
			Item Type:
				<input type=text name=checkinitem id=checkinitem>	   
				</div>
			<div>	
			Weighed by:
				<input type=text name=weighedby id=weighedby>	   
				</div>
			<div>	

			       			Witnessed by:
				<input type=text name=weighedby id=weighedby>	   

				</div>
			       
			       
			<input type=submit value=submit id=checkin onclick="checkin();" name=submit>
		      </form>
		      
		      
		      
    
		      
		      
		      </div>      
		       </div>
	      <div id=kwachk style="display:none;"><h1 id="kwac_title">Kwachk/ Uchukuzi</h1>
		      
		      
		       </div>
	      <div id=arega style="display:none;"><h1 id="areg_title">Arega/ Kusaga</h1>
		      
		      <form action="" id="myForm" onsubmit="clearCache()">
			      <input type="submit" value="submit" name="submit">
		      </form>
		 	<script>
				function clearCache() {
					  event.preventDefault()
  					  localStorage.clear()
			      		  localStorage.setItem("lastname", "Word")
				}
        		</script>
		      
		       </div>
	      <div id=mabroker style="display:none;"><h1 id="mabr_title">mabroker</h1>
		      
		      
		       </div>
	      <div id=boiler style="display:none;"><h1 id="boil_title">boiler</h1>
		      
		      
		       </div>
	      <div id=footsoldiers style="display:none;"><h1 id="mafo_title">footsoldiers</h1>
		      
		      
		       </div>
	      <div id=pusha style="display:none;"><h1 id="push_title">Pusha</h1>
	   
		      
		      
		          <textarea id="myTextarea" rows="10" cols="80"></textarea>
			    <p></p>
			    <button onclick="mySave()">Save</button>
			    <button onclick="myLoad()">Load</button>
			    <script>
			      function mySave() {
				var myContent = document.getElementById("myTextarea").value;
				localStorage.setItem("myContent", myContent);
			      }
			      function myLoad() {
				var myContent = localStorage.getItem("myContent");
				document.getElementById("myTextarea").value = myContent;
			      }
			    </script>
 
		      
		      
		      
		       </div>
	      <div id=presha style="display:none;"><h1 id="mold_title">Mold ya presha</h1>
		      
		      
		      </div>
	      <div id=dizo style="display:none;"><h1 id="dizo_title">Dizo</h1>
		      
		      
		      </div>
	      <div id=gascooker style="display:none;"><h1 id="gasc_title">Gas Cooker</h1>
		      
		      
		      </div>
	      <div id=gastangi style="display:none;"><h1 id="gast_title">Gas Tangi</h1>
		      
		      
		      </div>
	      <div id=kumaintain style="display:none;"><h1 id="kuma_title">Kumaintain / Kukacheza</h1>
		      
		      
		     </div>
	      <div id=stingozandifu style="display:none;"><h1 id="stin_title">Stingo Za Ndifu</h1>
		      
		      
		     </div>
	      <div id=maxchange style="display:none;"><h1 id="maxc_title">ma Xchange</h1>
		      
		      
		      </div>
	      <div id=profile style="display:none;"><h1 id="prof_title">Profile</h1>
		      
		      
		      
		      </div>		    
	    
	      <div id="map" style="width: 100%; height: 600px; border: 1px solid #ccc"></div>

	      <div id="mapbuttons">
		<button id="saveleafletdata">Save</button>
		<button id="loadData">Load</button>
		<button id="loadData2">Polygon</button>
		<button id="newbutton">New</button>
	      </div>
	    
	      
	    	    
      </ion-content>
      <ion-footer collapse="fade">
        <ion-toolbar>
          <ion-title><small>This tool built and maintained in collaboration with <a href="https://scdhub.org"><img src="https://scdhub.org/images/logo.svg" width=40 height=40 border=0></a> Ngive ya wachakuzi</small><ion-icon name="ios-clock" href="https://github.com/biomassives/ionic-vanilla-js/tree/eco-ops-app"></ion-icon></ion-title>
        </ion-toolbar>
      </ion-footer>
    </ion-page>
  </ion-app>

  <ion-menu-controller></ion-menu-controller>


	
	
</body>
<script type="module" src="/src/main.js"></script>
<script type="module" src="/src/Map.js"></script>
<script>
	// clicker
	
	var hits = 0;
	var hitElement = document.querySelector( '.hits' );
	document.body.onkeyup = function(e) {
 	 if( e.keyCode == 32 ) {
	    addHit();
  		}
	}

	var addHit = function() {
	  hits++;
	  renderHits();
	}

	var renderHits = function() {
	  hitElement.innerHTML = hits;
	}

	var resetHits = function() {
	  hits = 0;
	  renderHits();
	}
	
	
	
	
// form processing
	
var userhash = localStorage.getItem("userhash");
	
//  let btn = document.querySelector('#checkin');
//  btn.addEventListener('click', 
	
	
function checkin(){

		event.preventDefault();
		console.log("hello"); // The event details
		console.log(event); // The event details
		console.log(event.target); // The clicked element
	  				 localStorage.setItem("CheckinItem", "{ \"data\": [ ["+
					 temp +"] ], \"weight\":[\""+
					 popupSplits[4]+"\"],\"material\":[\""+
					 popupSplits[5]+"\"],\"checkinperson\":[\""+
					 popupSplits[6]+"\"],\"provider\":[\""+
					 featureid+"\"],\"datetime\":[\""+
					 featureid+"\"],\"wallett\":[\""+
					 featureid+"\"],\"wallet2\":[\""+
					 featureid+"\"],\"wallet3\":[\""+
					 featureid+"\"],\"wallet4\":[\""+
					 featureid+"\"],\"wallet5\":[\""+
					 featureid+"\"],\"wallet6\":[\""+
					 featureid+"\"],\"wallet7\":[\""+
					 featureid+"\"],\"wallet8\":[\""+
					 featureid+"\"],\"wallet9\":[\""+
					 featureid+"\"],\"wallet10\":[\""+			     
					 featureid+"\"],\"tweet\":[\""+
					 featureid+"\"],\"contract\":[\""+
					 featureid+"\"],\"photo\":[\""+
					 featureid+"\"],\"assetreward\":[\""+
					 featureid+"\"],\"featuretype\":[\"rectangle\"] }");
}
		
// menu layers	
function sheng(){
 document.getElementById("0maxchange").innerHTML=document.getElementById("maxc_title").innerHTML="Ma Xchange";
 document.getElementById("0stingozandifu").innerHTML=document.getElementById("stin_title").innerHTML="Stingozandifu";
 document.getElementById("0kumaintain").innerHTML=document.getElementById("kuma_title").innerHTML="Kumaintain";
 document.getElementById("0gastangi").innerHTML=document.getElementById("gast_title").innerHTML="Gas Tangi";
 document.getElementById("0gascooker").innerHTML=document.getElementById("gasc_title").innerHTML="Gas Cooker";
 document.getElementById("0dizo").innerHTML=document.getElementById("dizo_title").innerHTML="Dizo";
 document.getElementById("0presha").innerHTML=document.getElementById("mold_title").innerHTML="Mold ya Presha";
 document.getElementById("0boiler").innerHTML=document.getElementById("boil_title").innerHTML="Boiler Pusha";
 document.getElementById("0footsoldiers").innerHTML=document.getElementById("mafo_title").innerHTML="Ma Foot Soliders";
 document.getElementById("0mabroker").innerHTML=document.getElementById("mabr_title").innerHTML="Ma Broker";
 document.getElementById("0arega").innerHTML=document.getElementById("areg_title").innerHTML="Arega / Kusaga";
 document.getElementById("0kwachk").innerHTML=document.getElementById("kwac_title").innerHTML="Kwachk";
 document.getElementById("0kusafisha").innerHTML=document.getElementById("kusa_title").innerHTML="Kusafisha";
 document.getElementById("0selecta").innerHTML=document.getElementById("sele_title").innerHTML="Selecta";
 document.getElementById("0orodha").innerHTML=document.getElementById("orod_title").innerHTML="Orodha ya ma orodha";
 document.getElementById("0checkin").innerHTML="Pakua data yako";
 document.getElementById("0maleaf").innerHTML=document.getElementById("greeting_content").innerHTML="Ma leaf";
 document.getElementById("page_title_header").innerHTML="Usawa Mazingawasa";	
 document.getElementById("menu_header").style.background="url(/ecoops_transp_header.png) #efefef";
	
	
}
function eng(){
 document.getElementById("0maxchange").innerHTML=document.getElementById("maxc_title").innerHTML="Transfer";
 document.getElementById("0stingozandifu").innerHTML=document.getElementById("stin_title").innerHTML="Engineering";	
 document.getElementById("0kumaintain").innerHTML=document.getElementById("kuma_title").innerHTML="Maintenance";
 document.getElementById("0gastangi").innerHTML=document.getElementById("gast_title").innerHTML="Compressed Gas";
 document.getElementById("0gascooker").innerHTML=document.getElementById("gasc_title").innerHTML="Stove Fuel";
 document.getElementById("0dizo").innerHTML=document.getElementById("dizo_title").innerHTML="Diesel";
 document.getElementById("0presha").innerHTML=document.getElementById("mold_title").innerHTML="Pressure Molding";
 document.getElementById("0boiler").innerHTML=document.getElementById("boil_title").innerHTML="Extruding";
 document.getElementById("0footsoldiers").innerHTML=document.getElementById("mafo_title").innerHTML="Marketing";
 document.getElementById("0mabroker").innerHTML=document.getElementById("mabr_title").innerHTML="Brokering";
 document.getElementById("0arega").innerHTML=document.getElementById("areg_title").innerHTML="Chipping";
 document.getElementById("0kwachk").innerHTML=document.getElementById("kwac_title").innerHTML="Transport";
 document.getElementById("0kusafisha").innerHTML=document.getElementById("kusa_title").innerHTML="Cleaning";
 document.getElementById("0selecta").innerHTML=document.getElementById("sele_title").innerHTML="Sort approval";
 document.getElementById("0orodha").innerHTML=document.getElementById("orod_title").innerHTML="Checkin product";
 document.getElementById("0checkin").innerHTML="Download your data";
 document.getElementById("0maleaf").innerHTML=document.getElementById("greeting_content").innerHTML="Logistics Map";	
 document.getElementById("page_title_header").innerHTML="Environmental Equality";
}
function spanish(){
 document.getElementById("0maxchange").innerHTML=document.getElementById("maxc_title").innerHTML="Transferir";
 document.getElementById("0stingozandifu").innerHTML=document.getElementById("stin_title").innerHTML="Ingeniería";
 document.getElementById("0kumaintain").innerHTML=document.getElementById("kuma_title").innerHTML="Mantenimiento";
 document.getElementById("0gastangi").innerHTML=document.getElementById("gast_title").innerHTML="Gas comprimido";
 document.getElementById("0gascooker").innerHTML=document.getElementById("gasc_title").innerHTML="Combustible de estufa";
 document.getElementById("0dizo").innerHTML=document.getElementById("dizo_title").innerHTML="Diesel";
 document.getElementById("0presha").innerHTML=document.getElementById("mold_title").innerHTML="Moldeo a presión";
 document.getElementById("0boiler").innerHTML=document.getElementById("boil_title").innerHTML="extrusión";
 document.getElementById("0footsoldiers").innerHTML=document.getElementById("mafo_title").innerHTML="promociones";
 document.getElementById("0mabroker").innerHTML=document.getElementById("mabr_title").innerHTML="corretaje";
 document.getElementById("0arega").innerHTML=document.getElementById("areg_title").innerHTML="astillarse";
 document.getElementById("0kwachk").innerHTML=document.getElementById("kwac_title").innerHTML="Transporte";
 document.getElementById("0kusafisha").innerHTML=document.getElementById("kusa_title").innerHTML="Limpieza";
 document.getElementById("0selecta").innerHTML=document.getElementById("sele_title").innerHTML="Ordenar aprobación";
 document.getElementById("0orodha").innerHTML=document.getElementById("orod_title").innerHTML="Producto registrado";
 document.getElementById("0checkin").innerHTML="Descarga tus datos";
 document.getElementById("0maleaf").innerHTML=document.getElementById("greeting_content").innerHTML="Mapa";
 document.getElementById("page_title_header").innerHTML="Igualdad Ambiental";

}
function amharic(){
 document.getElementById("0maxchange").innerHTML="ማስተላለፍ";
 document.getElementById("0stingozandifu").innerHTML="ምህንድስና";
 document.getElementById("0kumaintain").innerHTML="ጥገና";
 document.getElementById("0gastangi").innerHTML="የታመቀ ጋዝ";
 document.getElementById("0gascooker").innerHTML="የምድጃ ነዳጅ";
 document.getElementById("0dizo").innerHTML="ናፍጣ";
 document.getElementById("0presha").innerHTML="የግፊት መቅረጽ";
 document.getElementById("0boiler").innerHTML="ማስወጣት";
 document.getElementById("0footsoldiers").innerHTML="ግብይት";
 document.getElementById("0mabroker").innerHTML="ደላላ";
 document.getElementById("0arega").innerHTML="መቆራረጥ";
 document.getElementById("0kwachk").innerHTML="መጓጓዣ";
 document.getElementById("0kusafisha").innerHTML="ማጽዳት";
 document.getElementById("0selecta").innerHTML=document.getElementById("sele_title").innerHTML="ማጽደቅን መደርደር";
 document.getElementById("0orodha").innerHTML=document.getElementById("orod_title").innerHTML="ምርቱን ያረጋግጡ";
 document.getElementById("0checkin").innerHTML="ውሂብዎን ያውርዱ";
 document.getElementById("0maleaf").innerHTML=document.getElementById("greeting_content").innerHTML="ካርታ";
 document.getElementById("page_title_header").innerHTML="የአካባቢ እኩልነት";
}	
function arabic(){
 document.getElementById("0maxchange").innerHTML="نقل";
 document.getElementById("0stingozandifu").innerHTML="هندسة";
 document.getElementById("0kumaintain").innerHTML="اعمال صيانة";
 document.getElementById("0gastangi").innerHTML="غاز مضغوط";
 document.getElementById("0gascooker").innerHTML="وقود الموقد";
 document.getElementById("0dizo").innerHTML="ديزل";
 document.getElementById("0presha").innerHTML="صب الضغط";
 document.getElementById("0boiler").innerHTML="البثق";
 document.getElementById("0footsoldiers").innerHTML="تسويق";
 document.getElementById("0mabroker").innerHTML="السمسرة";
 document.getElementById("0arega").innerHTML="التقطيع";
 document.getElementById("0kwachk").innerHTML="المواصلات";
 document.getElementById("0kusafisha").innerHTML="تنظيف";
 document.getElementById("0selecta").innerHTML="نوع الموافقة";
 document.getElementById("0orodha").innerHTML="منتج تسجيل الوصول";
 document.getElementById("0checkin").innerHTML="قم بتنزيل بياناتك";
 document.getElementById("0maleaf").innerHTML="خريطة";
 document.getElementById("page_title_header").innerHTML="المساواة البيئية";

}	
function russian(){
 document.getElementById("0maxchange").innerHTML="Передача";
 document.getElementById("0stingozandifu").innerHTML="инженерия";
 document.getElementById("0kumaintain").innerHTML="техобслуживание";
 document.getElementById("0gastangi").innerHTML="сжатый газ";
 document.getElementById("0gascooker").innerHTML="печное топливо";
 document.getElementById("0dizo").innerHTML="дизель";
 document.getElementById("0presha").innerHTML="литье под давлением";
 document.getElementById("0boiler").innerHTML="экструзия";
 document.getElementById("0footsoldiers").innerHTML="маркетинг";
 document.getElementById("0mabroker").innerHTML="посредничество";
 document.getElementById("0arega").innerHTML="измельчение";
 document.getElementById("0kwachk").innerHTML="Транспорт";
 document.getElementById("0kusafisha").innerHTML="уборка";
 document.getElementById("0selecta").innerHTML="тип согласия";
 document.getElementById("0orodha").innerHTML="Продукт регистрации";
 document.getElementById("0checkin").innerHTML="Загрузите ваши данные";
 document.getElementById("0maleaf").innerHTML="карта";
 document.getElementById("page_title_header").innerHTML="Экологическое равенство";

}	
function french(){
 document.getElementById("0maxchange").innerHTML="Transférer";
 document.getElementById("0stingozandifu").innerHTML="ingénierie";
 document.getElementById("0kumaintain").innerHTML="Réparation";
 document.getElementById("0gastangi").innerHTML="gaz compressé";
 document.getElementById("0gascooker").innerHTML="poêle à bois";
 document.getElementById("0dizo").innerHTML="diesel";
 document.getElementById("0presha").innerHTML="moulage sous pression";
 document.getElementById("0boiler").innerHTML="extrusion";
 document.getElementById("0footsoldiers").innerHTML="commercialisation";
 document.getElementById("0mabroker").innerHTML="courtage";
 document.getElementById("0arega").innerHTML="déchiquetage";
 document.getElementById("0kwachk").innerHTML="Transportation";
 document.getElementById("0kusafisha").innerHTML="nettoyage";
 document.getElementById("0selecta").innerHTML="type of consent";
 document.getElementById("0orodha").innerHTML="Produit d'enregistrement";
 document.getElementById("0checkin").innerHTML="Téléchargez vos données";
 document.getElementById("0maleaf").innerHTML="une carte";
 document.getElementById("page_title_header").innerHTML="Égalité environnementale";
}	
function chinese(){
 document.getElementById("0maxchange").innerHTML="转移";
 document.getElementById("0stingozandifu").innerHTML="工程";
 document.getElementById("0kumaintain").innerHTML="维修工作";
 document.getElementById("0gastangi").innerHTML="压缩气体";
 document.getElementById("0gascooker").innerHTML="炉灶燃料";
 document.getElementById("0dizo").innerHTML="柴油机";
 document.getElementById("0presha").innerHTML="压铸";
 document.getElementById("0boiler").innerHTML="挤压";
 document.getElementById("0footsoldiers").innerHTML="营销";
 document.getElementById("0mabroker").innerHTML="经纪";
 document.getElementById("0arega").innerHTML="切碎";
 document.getElementById("0kwachk").innerHTML="运输";
 document.getElementById("0kusafisha").innerHTML="打扫";
 document.getElementById("0selecta").innerHTML="同意类型";
 document.getElementById("0orodha").innerHTML="签到产品";
 document.getElementById("0checkin").innerHTML="下载您的数据";
 document.getElementById("0maleaf").innerHTML="一张地图";
 document.getElementById("page_title_header").innerHTML="环境平等";
}	
	
 
//  leafet map item submission	
function furbur() { 
		var density_element = document.getElementById('density');
		var rating_element = document.getElementById('rating');
		var descrip_element = document.getElementById('descrip'); 
		var datalayer_element = document.getElementById('datalayerid');
		var featuretype_element = document.getElementById('featuretype');
		var latlong_element = document.getElementById('latlong');
//		console.log(latlong_element.value);
		
		var latlong_element = latlong_element.value.replaceAll("LatLng("," [");
		latlong_element = latlong_element.replaceAll(")","]");
//		console.log("["+latlong_element+" ]");


//  attempt register value for selected circle radius
//		var radius_element = document.getElementById('radius');

	/*	if ( radius_element) {		
			console.log("radius_element");
			console.log(radius_element);
		}*/
		// generate specific polyline output
		// generate specific circle and marker one point output


		// save data string to localstorage
		localStorage.setItem(featuretype_element.value+datalayer_element.value, "{ \"data\": ["+ latlong_element +"] , \"density\":[\""+density_element.value+"\"],\"rating\":[\""+rating_element.value+"\"],\"description\":[\""+descrip_element.value+"\"],\"featureid\":[\""+datalayer_element.value+"\"],\"featuretype\":[\""+featuretype_element.value+"\"] }");

		var tempindex = localStorage.getItem("leafletFeatureIndex");
		console.log('tempindex' + tempindex);
		if (tempindex !== null ) {
		         localStorage.setItem("leafletFeatureIndex", tempindex +","+featuretype_element.value+datalayer_element.value);
		} else { localStorage.setItem("leafletFeatureIndex", featuretype_element.value+datalayer_element.value);
				 tempindex = featuretype_element.value+datalayer_element.value;
		}  

	// show data from popup form
	//
	//
	// TODO add edit and delete ( polygon and marker) buttons here
	//var tempindex = localStorage.getItem("leafletFeatureIndex");
		const indexedPolygons = tempindex.split(',');
		console.log('indexedPolygons');
		console.log(indexedPolygons);


	// popup response 
	//
	//
	// respond to popup marker data changes after submit popup form
	//
    // TODO: 6-1-2022 gw update the label for this object in the map object here
	//     so that new clicks dont give you a form any longer

			document.getElementById("markerform").innerHTML = "<b>"+ featuretype_element.value + datalayer_element.value+"</b><BR>Density:"+
			density_element.value+"<BR>Description:"+descrip_element.value+
			"<BR>Tags:"+
			rating_element.value;

	// draw new polygon derived from polyline 

				// list all polygons
				//
				// 1. make list of all first and last elements last lines
				//
				// 2. check to see if any points are very close together, 
				//				getDistance(from, to);				
				//				function getDistance(from, to)
				//				{
				//					var container = document.getElementById('distance');
				//					container.innerHTML = ("New Delhi to Mumbai - " + (from.distanceTo(to)).toFixed(0)/1000) + ' km';
				//				}

				if (featuretype_element.value === "polyline") {

					// get index
					var tempindex = localStorage.getItem("leafletFeatureIndex");
					const newArr = tempindex.split(',');
					var n = 0;
					var newPolygon = "";
					newArr.forEach(element => {

						if (element.includes("polyline")) {
							// list only data from polylines
							const loopi = localStorage.getItem(element);
							console.log("loop")
							console.log(n)
							console.log(loopi)
							const obj = JSON.parse(loopi)
							console.log("obj.data")
							console.log(obj.data)
							console.log(obj.data[0])
							console.log(obj.data[2])
							if ( n === 0)
								newPolygon = "[" + obj.data[0] + "," + obj.data[2]
							else 
								newPolygon = newPolygon + "," + obj.data[2]
							n = n+1
						}
					})
					newPolygon = newPolygon + "]"
					console.log("newPolygon")
					console.log(newPolygon)
				}
				if (newPolygon){
					var polygon0 =	 L.polygon(newPolygon).bindPopup("<h4>New Polygon");
					var drawnItems = new L.FeatureGroup();
					drawnItems.addLayer(polygon0);
				}

	}; 

/*  if(e.target && e.target.id== 'english'){	
	eng();
	alery("hi there");
    }
    if(e.target && e.target.id== 'sheng'){	
	sheng();
    }  
    if(e.target && e.target.id== 'arabic'){	
	arabic();
    }*/

	
document.addEventListener('click',function(e){

  

    if(e.target && e.target.id== 'shownum'){
          //do something
 
		let currentNumber = 0;
		let isIncreasing = true;
		const shownum = document.querySelector('.shownum');

		//showNumberP.textContent = currentNumber;
		shownum.onclick = () => {
			
			if (isIncreasing) {
				currentNumber++;
				if (currentNumber == 5) isIncreasing = false;
			} else {
				currentNumber--;
				if (currentNumber == 0) isIncreasing = true;
			}
			
		shownum.src = "/icons/density"+currentNumber+".svg";

		}

	}
});


/*let btn = document.querySelector('#click-me');

btn.addEventListener('click', function (event) {
	console.log(event); // The event details
	console.log(event.target); // The clicked element
});
*/

		function check_value()
		{
			switch(document.test.density.value)
			{
				case "zero":
				 
					document.getElementById("").innerHTML = "<img src='icons/density0.svg' width=183>";
					break;
	
				case "one":
				 
					document.getElementById("imagedest").innerHTML = "<img src='icons/density1.svg' width=183>";
					break;
	
				case "two":
	
					document.getElementById("imagedest").innerHTML = "<img src='icons/density2.svg' width=183>"; 
					break;
	
				case "three":
	
					document.getElementById("imagedest").innerHTML = "<img src='icons/density3.svg' width=183>"; 
					break;
	
				case "three":
	
					document.getElementById("imagedest").innerHTML = "<img src='icons/density3.svg' width=183>"; 
					break;				
	
				case "four":
	
					document.getElementById("imagedest").innerHTML = "<img src='icons/density4.svg' width=183>"; 
					break;
	
				case "five":
	
					document.getElementById("imagedest").innerHTML = "<img src='icons/density5.svg' width=183>"; 
					break;
	
				}
		}
</script>
</html>
